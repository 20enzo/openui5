{"version":3,"file":"Input.js","sources":["../../../../../../../../../ui5-webcomponents/packages/main/dist/features/InputSuggestions.js","../../../../../../../../../ui5-webcomponents/packages/main/dist/features/InputElementsFormSupport.js"],"sourcesContent":["import { registerFeature } from \"@ui5/webcomponents-base/dist/FeaturesRegistry.js\";\nimport { getI18nBundle } from \"@ui5/webcomponents-base/dist/i18nBundle.js\";\n\nimport List from \"../List.js\";\nimport ResponsivePopover from \"../ResponsivePopover.js\";\nimport SuggestionItem from \"../SuggestionItem.js\";\nimport Button from \"../Button.js\";\nimport GroupHeaderListItem from \"../GroupHeaderListItem.js\";\nimport SuggestionListItem from \"../SuggestionListItem.js\";\n\nimport {\n\tLIST_ITEM_POSITION,\n\tLIST_ITEM_SELECTED,\n} from \"../generated/i18n/i18n-defaults.js\";\n/**\n * A class to manage the <code>Input</code suggestion items.\n *\n * @class\n * @private\n * @author SAP SE\n */\nclass Suggestions {\n\tconstructor(component, slotName, highlight, handleFocus) {\n\t\t// The component, that the suggestion would plug into.\n\t\tthis.component = component;\n\n\t\t// Defines the items` slot name.\n\t\tthis.slotName = slotName;\n\n\t\t// Defines, if the focus will be moved via the arrow keys.\n\t\tthis.handleFocus = handleFocus;\n\n\t\t// Defines, if the suggestions should highlight.\n\t\tthis.highlight = highlight;\n\n\t\t// Press and Focus handlers\n\t\tthis.fnOnSuggestionItemPress = this.onItemPress.bind(this);\n\t\tthis.fnOnSuggestionItemFocus = this.onItemFocused.bind(this);\n\t\tthis.fnOnSuggestionItemMouseOver = this.onItemMouseOver.bind(this);\n\t\tthis.fnOnSuggestionItemMouseOut = this.onItemMouseOut.bind(this);\n\n\t\t// An integer value to store the currently selected item position,\n\t\t// that changes due to user interaction.\n\t\tthis.selectedItemIndex = null;\n\n\t\tthis.i18nBundle = getI18nBundle(\"@ui5/webcomponents\");\n\n\t\tthis.accInfo = {};\n\t}\n\n\t/* Public methods */\n\tdefaultSlotProperties(hightlightValue) {\n\t\tconst inputSuggestionItems = this._getComponent().suggestionItems;\n\t\tconst highlight = this.highlight && !!hightlightValue;\n\t\tconst suggestions = [];\n\n\t\tinputSuggestionItems.map((suggestion, idx) => {\n\t\t\tconst text = highlight ? this.getHighlightedText(suggestion, hightlightValue) : this.getRowText(suggestion);\n\t\t\tconst description = highlight ? this.getHighlightedDesc(suggestion, hightlightValue) : this.getRowDesc(suggestion);\n\n\t\t\treturn suggestions.push({\n\t\t\t\ttext,\n\t\t\t\tdescription,\n\t\t\t\timage: suggestion.image || undefined,\n\t\t\t\ticon: suggestion.icon || undefined,\n\t\t\t\ttype: suggestion.type || undefined,\n\t\t\t\tinfo: suggestion.info || undefined,\n\t\t\t\tinfoState: suggestion.infoState,\n\t\t\t\tgroup: suggestion.group,\n\t\t\t\tkey: idx,\n\t\t\t});\n\t\t});\n\n\t\treturn suggestions;\n\t}\n\n\tonUp(event) {\n\t\tevent.preventDefault();\n\t\tthis._handleItemNavigation(false /* forward */);\n\t\treturn true;\n\t}\n\n\tonDown(event) {\n\t\tevent.preventDefault();\n\t\tthis._handleItemNavigation(true /* forward */);\n\t\treturn true;\n\t}\n\n\tonSpace(event) {\n\t\tif (this._isItemOnTarget()) {\n\t\t\tevent.preventDefault();\n\t\t\tthis.onItemSelected(null, true /* keyboardUsed */);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tonEnter(event) {\n\t\tif (this._isItemOnTarget()) {\n\t\t\tthis.onItemSelected(null, true /* keyboardUsed */);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\ttoggle(bToggle, { preventFocusRestore }) {\n\t\tconst toggle = bToggle !== undefined ? bToggle : !this.isOpened();\n\n\t\tif (toggle) {\n\t\t\tthis.open();\n\t\t} else {\n\t\t\tthis.close(preventFocusRestore);\n\t\t}\n\t}\n\n\tasync _isScrollable() {\n\t\tconst sc = await this._getScrollContainer();\n\t\treturn sc.offsetHeight < sc.scrollHeight;\n\t}\n\n\tasync open() {\n\t\tthis.responsivePopover = await this._respPopover();\n\t\tthis._beforeOpen();\n\n\t\tif (this._getItems().length) {\n\t\t\tthis.responsivePopover.open(this._getComponent());\n\t\t}\n\t}\n\n\tasync close(preventFocusRestore = false) {\n\t\tthis.responsivePopover = await this._respPopover();\n\t\tthis.responsivePopover.close(false, false, preventFocusRestore);\n\t}\n\n\tupdateSelectedItemPosition(pos) {\n\t\tthis.selectedItemIndex = pos;\n\t}\n\n\t/* Interface methods */\n\tonItemFocused() {\n\t\tthis._getComponent().onItemFocused();\n\t}\n\n\tonItemMouseOver(event) {\n\t\tthis._getComponent().onItemMouseOver(event);\n\t}\n\n\tonItemMouseOut(event) {\n\t\tthis._getComponent().onItemMouseOut(event);\n\t}\n\n\tonItemSelected(selectedItem, keyboardUsed) {\n\t\tconst allItems = this._getItems();\n\t\tconst item = selectedItem || allItems[this.selectedItemIndex];\n\n\t\tthis.selectedItemIndex = allItems.indexOf(item);\n\n\t\tthis.accInfo = {\n\t\t\tcurrentPos: this.selectedItemIndex + 1,\n\t\t\tlistSize: allItems.length,\n\t\t\titemText: item.textContent,\n\t\t};\n\n\t\t// If the item is \"Inactive\", prevent selection with SPACE or ENTER\n\t\t// to have consistency with the way \"Inactive\" items behave in the ui5-list\n\t\tif (item.type === \"Inactive\") {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._getComponent().onItemSelected(this._getRealItems()[this.selectedItemIndex], keyboardUsed);\n\t\titem.selected = false;\n\t\tthis.close();\n\t}\n\n\tonItemPreviewed(item) {\n\t\tthis._getComponent().onItemPreviewed(item);\n\t}\n\n\t/* Private methods */\n\tonItemPress(oEvent) {\n\t\tthis.onItemSelected(oEvent.detail.item, false /* keyboardUsed */);\n\t}\n\n\t_beforeOpen() {\n\t\tthis._attachItemsListeners();\n\t\tthis._attachPopupListeners();\n\t}\n\n\tasync _attachItemsListeners() {\n\t\tconst list = await this._getList();\n\t\tlist.removeEventListener(\"ui5-item-press\", this.fnOnSuggestionItemPress);\n\t\tlist.addEventListener(\"ui5-item-press\", this.fnOnSuggestionItemPress);\n\t\tlist.removeEventListener(\"ui5-item-focused\", this.fnOnSuggestionItemFocus);\n\t\tlist.addEventListener(\"ui5-item-focused\", this.fnOnSuggestionItemFocus);\n\t\tlist.removeEventListener(\"mouseover\", this.fnOnSuggestionItemMouseOver);\n\t\tlist.addEventListener(\"mouseover\", this.fnOnSuggestionItemMouseOver);\n\t\tlist.removeEventListener(\"mouseout\", this.fnOnSuggestionItemMouseOut);\n\t\tlist.addEventListener(\"mouseout\", this.fnOnSuggestionItemMouseOut);\n\t}\n\n\t_attachPopupListeners() {\n\t\tif (!this.handleFocus) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.attachedAfterOpened) {\n\t\t\tthis._respPopover.addEventListener(\"ui5-after-open\", this._onOpen.bind(this));\n\t\t\tthis.attachedAfterOpened = true;\n\t\t}\n\n\t\tif (!this.attachedAfterClose) {\n\t\t\tthis._respPopover.addEventListener(\"ui5-after-close\", this._onClose.bind(this));\n\t\t\tthis.attachedAfterClose = true;\n\t\t}\n\t}\n\n\t_onOpen() {\n\t\tthis._applyFocus();\n\t\tthis._getComponent().onOpen();\n\t}\n\n\t_onClose() {\n\t\tthis._getComponent().onClose();\n\t}\n\n\t_applyFocus() {\n\t\tif (this.selectedItemIndex) {\n\t\t\tthis._getItems()[this.selectedItemIndex].focus();\n\t\t}\n\t}\n\n\t_isItemOnTarget() {\n\t\treturn this.isOpened() && this.selectedItemIndex !== null;\n\t}\n\n\tisOpened() {\n\t\treturn !!(this.responsivePopover && this.responsivePopover.opened);\n\t}\n\n\t_handleItemNavigation(forward) {\n\t\tif (!this._getItems().length) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (forward) {\n\t\t\tthis._selectNextItem();\n\t\t} else {\n\t\t\tthis._selectPreviousItem();\n\t\t}\n\t}\n\n\t_selectNextItem() {\n\t\tconst itemsCount = this._getItems().length;\n\t\tconst previousSelectedIdx = this.selectedItemIndex;\n\n\t\tif ((this.selectedItemIndex === null) || (++this.selectedItemIndex > itemsCount - 1)) {\n\t\t\tthis.selectedItemIndex = 0;\n\t\t}\n\n\t\tthis._moveItemSelection(previousSelectedIdx, this.selectedItemIndex);\n\t}\n\n\t_selectPreviousItem() {\n\t\tconst itemsCount = this._getItems().length;\n\t\tconst previousSelectedIdx = this.selectedItemIndex;\n\n\t\tif ((this.selectedItemIndex === null) || (--this.selectedItemIndex < 0)) {\n\t\t\tthis.selectedItemIndex = itemsCount - 1;\n\t\t}\n\n\t\tthis._moveItemSelection(previousSelectedIdx, this.selectedItemIndex);\n\t}\n\n\t_moveItemSelection(previousIdx, nextIdx) {\n\t\tconst items = this._getItems();\n\t\tconst currentItem = items[nextIdx];\n\t\tconst previousItem = items[previousIdx];\n\n\t\tthis.accInfo = {\n\t\t\tcurrentPos: nextIdx + 1,\n\t\t\tlistSize: items.length,\n\t\t\titemText: currentItem.textContent,\n\t\t};\n\n\t\tif (previousItem) {\n\t\t\tpreviousItem.selected = false;\n\t\t}\n\n\t\tif (currentItem) {\n\t\t\tcurrentItem.selected = true;\n\n\t\t\tif (this.handleFocus) {\n\t\t\t\tcurrentItem.focus();\n\t\t\t}\n\t\t}\n\n\t\tthis.onItemPreviewed(currentItem);\n\n\t\tif (!this._isItemIntoView(currentItem)) {\n\t\t\tthis._scrollItemIntoView(currentItem);\n\t\t}\n\t}\n\n\t_isItemIntoView(item) {\n\t\tconst rectItem = item.getDomRef().getBoundingClientRect();\n\t\tconst rectInput = this._getComponent().getDomRef().getBoundingClientRect();\n\t\tconst windowHeight = (window.innerHeight || document.documentElement.clientHeight);\n\n\t\treturn (rectItem.top + Suggestions.SCROLL_STEP <= windowHeight) && (rectItem.top >= rectInput.top);\n\t}\n\n\tasync _scrollItemIntoView(item) {\n\t\tconst pos = item.getDomRef().offsetTop;\n\t\tconst scrollContainer = await this._getScrollContainer();\n\t\tscrollContainer.scrollTop = pos;\n\t}\n\n\tasync _getScrollContainer() {\n\t\tif (!this._scrollContainer) {\n\t\t\tawait this._respPopover();\n\t\t\tthis._scrollContainer = this.responsivePopover.shadowRoot.querySelector(\".ui5-popup-content\");\n\t\t}\n\n\t\treturn this._scrollContainer;\n\t}\n\n\t_getItems() {\n\t\treturn [...this.responsivePopover.querySelector(\"[ui5-list]\").children];\n\t}\n\n\t_getComponent() {\n\t\treturn this.component;\n\t}\n\n\tasync _getList() {\n\t\tthis.responsivePopover = await this._respPopover();\n\t\treturn this.responsivePopover.querySelector(\"[ui5-list]\");\n\t}\n\n\tasync _getListWidth() {\n\t\tconst list = await this._getList();\n\t\treturn list.offsetWidth;\n\t}\n\n\t_getRealItems() {\n\t\treturn this._getComponent().getSlottedNodes(this.slotName);\n\t}\n\n\tasync _respPopover() {\n\t\tif (this.responsivePopover) {\n\t\t\treturn this.responsivePopover;\n\t\t}\n\n\t\tconst staticAreaItem = await this._getComponent().getStaticAreaItemDomRef();\n\t\tthis.responsivePopover = staticAreaItem.querySelector(\"[ui5-responsive-popover]\");\n\t\treturn this.responsivePopover;\n\t}\n\n\tget itemSelectionAnnounce() {\n\t\tconst i18nBundle = this.i18nBundle,\n\t\t\titemPositionText = i18nBundle.getText(LIST_ITEM_POSITION, [this.accInfo.currentPos], [this.accInfo.listSize]),\n\t\t\titemSelectionText = i18nBundle.getText(LIST_ITEM_SELECTED);\n\n\t\treturn `${itemPositionText} ${this.accInfo.itemText} ${itemSelectionText}`;\n\t}\n\n\tgetRowText(suggestion) {\n\t\treturn this.sanitizeText(suggestion.text || suggestion.textContent);\n\t}\n\n\tgetRowDesc(suggestion) {\n\t\tif (suggestion.description) {\n\t\t\treturn this.sanitizeText(suggestion.description);\n\t\t}\n\t}\n\n\tgetHighlightedText(suggestion, input) {\n\t\tlet text = suggestion.text || suggestion.textContent;\n\t\ttext = this.sanitizeText(text);\n\n\t\treturn this.hightlightInput(text, input);\n\t}\n\n\tgetHighlightedDesc(suggestion, input) {\n\t\tlet text = suggestion.description;\n\t\ttext = this.sanitizeText(text);\n\n\t\treturn this.hightlightInput(text, input);\n\t}\n\n\thightlightInput(text, input) {\n\t\tif (!text) {\n\t\t\treturn text;\n\t\t}\n\n\t\tconst inputEscaped = input.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n\t\tconst regEx = new RegExp(inputEscaped, \"ig\");\n\t\treturn text.replace(regEx, match => `<b>${match}</b>`);\n\t}\n\n\tsanitizeText(text) {\n\t\treturn text && text.replace(\"<\", \"&lt\");\n\t}\n\n\tstatic get dependencies() {\n\t\treturn [\n\t\t\tSuggestionItem,\n\t\t\tResponsivePopover,\n\t\t\tList,\n\t\t\tSuggestionListItem,\n\t\t\tGroupHeaderListItem,\n\t\t\tButton,\n\t\t];\n\t}\n}\n\nSuggestions.SCROLL_STEP = 60;\n\n// Add suggestions support to the global features registry so that Input.js can use it\nregisterFeature(\"InputSuggestions\", Suggestions);\n\nexport default Suggestions;\n","import { registerFeature } from \"@ui5/webcomponents-base/dist/FeaturesRegistry.js\";\n\nclass FormSupport {\n\t/**\n\t *\n\t * @param element - the WebComponent that needs form support\n\t * @param nativeInputUpdateCallback - determines how the native input's disabled and value properties are calculated\n\t */\n\tstatic syncNativeHiddenInput(element, nativeInputUpdateCallback) {\n\t\tconst needsNativeInput = !!element.name;\n\t\tlet nativeInput = element.querySelector(\"input[type=hidden][data-ui5-form-support]\");\n\t\tif (needsNativeInput && !nativeInput) {\n\t\t\tnativeInput = document.createElement(\"input\");\n\t\t\tnativeInput.type = \"hidden\";\n\t\t\tnativeInput.setAttribute(\"data-ui5-form-support\", \"\");\n\t\t\tnativeInput.slot = \"formSupport\"; // Needed for IE - otherwise input elements are not part of the real DOM tree and are not detected by forms\n\t\t\telement.appendChild(nativeInput);\n\t\t}\n\t\tif (!needsNativeInput && nativeInput) {\n\t\t\telement.removeChild(nativeInput);\n\t\t}\n\n\t\tif (needsNativeInput) {\n\t\t\tnativeInput.name = element.name;\n\t\t\t(nativeInputUpdateCallback || copyDefaultProperties)(element, nativeInput);\n\t\t}\n\t}\n\n\tstatic syncNativeFileInput(element, nativeInputUpdateCallback, nativeInputChangeCallback) {\n\t\tconst needsNativeInput = !!element.name;\n\t\tlet nativeInput = element.querySelector(`input[type=${element._type || \"hidden\"}][data-ui5-form-support]`);\n\n\t\tif (needsNativeInput && !nativeInput) {\n\t\t\tnativeInput = document.createElement(\"input\");\n\t\t\tnativeInput.type = element._type;\n\t\t\tnativeInput.setAttribute(\"data-ui5-form-support\", \"\");\n\t\t\tnativeInput.slot = \"formSupport\"; // Needed to visualize the input in the light dom\n\t\t\tnativeInput.style.position = \"absolute\";\n\t\t\tnativeInput.style.top = \"0\";\n\t\t\tnativeInput.style.left = \"0\";\n\t\t\tnativeInput.style.width = \"100%\";\n\t\t\tnativeInput.style.height = \"100%\";\n\t\t\tnativeInput.style.opacity = \"0\";\n\n\t\t\tif (element.multiple) {\n\t\t\t\tnativeInput.multiple = true;\n\t\t\t}\n\n\t\t\tnativeInput.addEventListener(\"change\", nativeInputChangeCallback);\n\n\t\t\telement.appendChild(nativeInput);\n\t\t}\n\n\t\tif (!needsNativeInput && nativeInput) {\n\t\t\telement.removeChild(nativeInput);\n\t\t}\n\n\t\tif (needsNativeInput) {\n\t\t\tnativeInput.name = element.name;\n\t\t\t(nativeInputUpdateCallback || copyDefaultProperties)(element, nativeInput);\n\t\t}\n\t}\n\n\tstatic triggerFormSubmit(element) {\n\t\tif (!element.submits) {\n\t\t\treturn;\n\t\t}\n\t\tlet currentElement = element.parentElement;\n\t\twhile (currentElement && currentElement.tagName.toLowerCase() !== \"form\") {\n\t\t\tcurrentElement = currentElement.parentElement;\n\t\t}\n\t\tif (currentElement) {\n\t\t\tcurrentElement.submit();\n\t\t} else {\n\t\t\tconsole.error(`${element} is not within a form. Please add it in a form.`); // eslint-disable-line\n\t\t}\n\t}\n}\n\n\nconst copyDefaultProperties = (element, nativeInput) => {\n\tnativeInput.disabled = element.disabled;\n\tnativeInput.value = element.value;\n};\n\n// Add form support to the global features registry so that Web Components can find and use it\nregisterFeature(\"FormSupport\", FormSupport);\n\nexport default FormSupport;\n"],"names":["Suggestions","component","slotName","highlight","handleFocus","fnOnSuggestionItemPress","onItemPress","bind","fnOnSuggestionItemFocus","onItemFocused","fnOnSuggestionItemMouseOver","onItemMouseOver","fnOnSuggestionItemMouseOut","onItemMouseOut","selectedItemIndex","i18nBundle","getI18nBundle","accInfo","hightlightValue","inputSuggestionItems","_getComponent","suggestionItems","suggestions","map","suggestion","idx","text","getHighlightedText","getRowText","description","getHighlightedDesc","getRowDesc","push","image","undefined","icon","type","info","infoState","group","key","event","preventDefault","_handleItemNavigation","_isItemOnTarget","onItemSelected","bToggle","preventFocusRestore","toggle","isOpened","open","close","_getScrollContainer","sc","offsetHeight","scrollHeight","_respPopover","responsivePopover","_beforeOpen","_getItems","length","pos","selectedItem","keyboardUsed","allItems","item","indexOf","currentPos","listSize","itemText","textContent","_getRealItems","selected","onItemPreviewed","oEvent","detail","_attachItemsListeners","_attachPopupListeners","_getList","list","removeEventListener","addEventListener","attachedAfterOpened","_onOpen","attachedAfterClose","_onClose","_applyFocus","onOpen","onClose","focus","opened","forward","_selectNextItem","_selectPreviousItem","itemsCount","previousSelectedIdx","_moveItemSelection","previousIdx","nextIdx","items","currentItem","previousItem","_isItemIntoView","_scrollItemIntoView","rectItem","getDomRef","getBoundingClientRect","rectInput","windowHeight","window","innerHeight","document","documentElement","clientHeight","top","SCROLL_STEP","offsetTop","scrollContainer","scrollTop","_scrollContainer","shadowRoot","querySelector","children","offsetWidth","getSlottedNodes","getStaticAreaItemDomRef","staticAreaItem","sanitizeText","input","hightlightInput","inputEscaped","replace","regEx","RegExp","match","itemPositionText","getText","LIST_ITEM_POSITION","itemSelectionText","LIST_ITEM_SELECTED","SuggestionItem","ResponsivePopover","List","SuggestionListItem","GroupHeaderListItem","Button","registerFeature","FormSupport","element","nativeInputUpdateCallback","needsNativeInput","name","nativeInput","createElement","setAttribute","slot","appendChild","removeChild","copyDefaultProperties","nativeInputChangeCallback","_type","style","position","left","width","height","opacity","multiple","submits","currentElement","parentElement","tagName","toLowerCase","submit","console","error","disabled","value"],"mappings":"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"}